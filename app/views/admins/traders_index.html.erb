<h1>All Traders</h1>

<% if @traders.nil? || @traders.empty? %>
  <p>No traders found.</p>
<% else %>
  <table>
<thead>
  <tr>
    <th>Email</th>
    <th>Role</th>
    <th>Registered</th>
    <th>Approved</th>
    <th>Actions</th>
  </tr>
</thead>
<tbody>
  <% @traders.each do |trader| %>
    <tr>
      <td><%= trader.email %></td>
      <td><%= trader.role %></td>
      <td><%= trader.created_at.strftime("%B %d, %Y") %></td>
      <td>
        <%= trader.approved_at.present? ? trader.approved_at.strftime("%B %d, %Y") : "Pending" %>
      </td>
      <td>
        <%= link_to "Show", admin_trader_path(trader) %> |
        <%= link_to "Edit", edit_admin_trader_path(trader) %> |
        <%= link_to "Promote to Admin", promote_user_path(trader), method: :patch if trader.role == "trader" %>
        <%= link_to "Demote to Trader", demote_user_path(trader), method: :patch if trader.role == "admin" %>
      </td>
    </tr>
  <% end %>
</tbody>
  </table>
<% end %>
<br>
<%= link_to "Create New Trader", new_admin_trader_path, class: "button" %>
<br>
<%= link_to "Back to Dashboard", admin_dashboard_path, class: "button" %>
